__wxCodeSpace__.batchAddCompiledTemplate(function(G,R,D,Q,gdc,X,Y,Z,RG={}){var P=RG.P||function(a){return typeof a==='function'?a:()=>{}};return {'pages/editor/index':(()=>{var H={};var S;var I=(P)=>{if(!S)S=Object.assign({},H);return S[P]};H[""]=(R,C,D,U)=>{var L=R.c,M=R.m,O=R.r,A={"video":new Array(1),"album":new Array(2),"toggle":new Array(1),"editing":new Array(1)},K=U===true,d=(C,T)=>{var $A=D.id;var $B=D.type==2;C||K||!!(U.id||($A?undefined:undefined)||U.type||($B?undefined:undefined))||undefined?T(Y(Y($A?"编辑":"发布")+Y($B?"买卖":"租赁")+"房源")):T()},c=(C,T,E)=>{E("view",{},(N,C)=>{},d)},g,i=(C)=>{},k=(C,T)=>{C?T("基础信息（不可修改）："):T()},m=(C,T)=>{C||K||!!(Z(Z(U.detail,"house"),"address")||Z(U.detail,"page_title"))||undefined?T(Y(Y(X(X(D.detail).house).address)+" · "+Y(X(D.detail).page_title))):T()},l=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"form-item__body_input")},m)},j=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"form-item__label")},k);E("view",{},(N,C)=>{if(C)L(N,"form-item__body")},l)},h=(C,T,E)=>{if(g===1){E("house-info-location",{},(N,C)=>{if(C||K||Z(U.location_info,"city"))O(N,"city",X(D.location_info).city);var $A=D.poi_info;if(C||K||!!U.poi_info||($A?Z(U.poi_info,"name"):undefined))O(N,"address",$A?X(D.poi_info).name:"");if(C)R.v(N,"locate","select",!1,!1,!1,!1)},i)}else{E("view",{},(N,C)=>{if(C)L(N,"form-item")},j)}},n,p=(C)=>{},o=(C,T,E)=>{if(n===1){E("house-info-renttype",{},(N,C)=>{if(C||K||Z(U.basic_info,"rent_type"))O(N,"type",X(D.basic_info).rent_type);if(C)R.v(N,"set","update",!1,!1,!1,!1)},p)}},q,s=(C)=>{},r=(C,T,E)=>{if(q===1){E("house-info-bedcount",{},(N,C)=>{if(C||K||Z(U.basic_info,"bed_count"))O(N,"count",X(D.basic_info).bed_count);if(C)R.v(N,"set","update",!1,!1,!1,!1)},s)}},t=(C)=>{},u,w=(C)=>{},x=(C)=>{},v=(C,T,E)=>{if(u===1){E("house-info-rate",{},(N,C)=>{if(C||K||Z(U.basic_info,"money"))O(N,"price",X(D.basic_info).money);if(C)R.v(N,"set","update",!1,!1,!1,!1)},w)}else{E("house-info-price",{},(N,C)=>{if(C||K||Z(U.basic_info,"money"))O(N,"price",X(D.basic_info).money);if(C)R.v(N,"set","update",!1,!1,!1,!1)},x)}},y=(C)=>{},z=(C)=>{},A0=(C)=>{},B0=(C)=>{},f=(C,T,E,B)=>{g=!D.id?1:0;B(g,h);n=!D.id&&D.type!=2?1:0;B(n,o);q=!D.id?1:0;B(q,r);E("house-info-square",{},(N,C)=>{if(C||K||Z(U.basic_info,"square_meter"))O(N,"square",X(D.basic_info).square_meter);if(C)R.v(N,"set","update",!1,!1,!1,!1)},t);u=D.type==2?1:0;B(u,v);E("house-info-video",{},(N,C)=>{if(C||K||U.video)O(N,"video",D.video);A["video"][0]=(D,E,T)=>{O(N,"video",D.video);E(N)};if(C)R.v(N,"video","capture",!1,!1,!1,!1);if(C)R.v(N,"remove","cutoff",!1,!1,!1,!1);if(C)R.v(N,"uploadingstart","progress",!1,!1,!1,!1);if(C)R.v(N,"uploadingend","progress",!1,!1,!1,!1)},y);E("house-info-album",{},(N,C)=>{if(C||K||U.album)O(N,"album",D.album);A["album"][0]=(D,E,T)=>{O(N,"album",D.album);E(N)};if(C)R.v(N,"album","edit",!1,!1,!1,!1)},z);E("house-info-content",{},(N,C)=>{if(C||K||Z(U.basic_info,"content"))O(N,"content",X(D.basic_info).content);if(C)R.v(N,"set","update",!1,!1,!1,!1)},A0);E("house-info-contact",{},(N,C)=>{if(C||K||Z(U.basic_info,"contact"))O(N,"contact",X(D.basic_info).contact);if(C)R.v(N,"set","update",!1,!1,!1,!1)},B0)},e=(C,T,E)=>{E("scroll-view",{},(N,C)=>{if(C)L(N,"scroll-content");if(C||K||undefined)O(N,"enable-passive",true);if(C||K||undefined)O(N,"scroll-y",true);if(C||K||undefined)O(N,"enhanced",true);if(C||K||undefined)O(N,"show-scrollbar",false)},f)},E0=(C,T)=>{C?T("保 存"):T()},D0=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"operation-container__btn");if(C)O(N,"bindtap","confirm")},E0)},C0=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"operation-container")},D0)},G0=(C)=>{},F0=(C,T,E)=>{E("house-info-gallery",{},(N,C)=>{if(C||K||U.album)O(N,"album",D.album);A["album"][1]=(D,E,T)=>{O(N,"album",D.album);E(N)};if(C)R.v(N,"album","edit",!1,!1,!1,!1);if(C)R.v(N,"image","manage",!1,!1,!1,!1);if(C)R.v(N,"remove","remove",!1,!1,!1,!1);if(C)R.v(N,"uploadingstart","progress",!1,!1,!1,!1);if(C)R.v(N,"uploadingend","progress",!1,!1,!1,!1)},G0)},H0=(C)=>{},b=(C,T,E)=>{E("nav-bar",{},(N,C)=>{var $A=D.id;var $B=D.type==2;if(C||K||!!(U.id||($A?undefined:undefined)||U.type||($B?undefined:undefined))||undefined)O(N,"title",Y($A?"编辑":"发布")+Y($B?"买卖":"租赁")+"房源")},c);E("view",{},(N,C)=>{if(C)L(N,"scroll-container scroll-container-card")},e);E("view",{},(N,C)=>{if(C)L(N,"footer-operation")},C0);E("page-container",{},(N,C)=>{if(C||K||U.editing)O(N,"show",D.editing);A["editing"][0]=(D,E,T)=>{O(N,"show",D.editing);E(N)};if(C||K||undefined)O(N,"round",true);if(C||K||undefined)O(N,"overlay",true);if(C)O(N,"position","bottom")},F0);E("signin-panel",{},(N,C)=>{if(C||K||U.toggle)O(N,"show",D.toggle);A["toggle"][0]=(D,E,T)=>{O(N,"show",D.toggle);E(N)};if(C)O(N,"desc","发布房源");if(C)R.v(N,"login","init",!1,!1,!1,!1);if(C)R.v(N,"quit","cancel",!1,!1,!1,!1)},H0)},a=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"container container-flex")},b)};;return {C:a,B:A}};return Object.assign(function(R){return H[R]},{_:H})})(),}});;__wxRoute = "pages/editor/index";__wxRouteBegin = true;__wxAppCurrentFile__="pages/editor/index.js";define("pages/editor/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var t=require("../../@babel/runtime/helpers/toConsumableArray"),e=require("../../@babel/runtime/helpers/defineProperty"),a=require("../../@babel/runtime/helpers/objectSpread2"),i=require("../../0CB3296685E1369C6AD5416181F12695.js"),n=require("../../5C9CDA9585E1369C3AFAB292CA022695.js"),s=l(require("../../737EDC9385E1369C1518B494D3412695.js")),o=l(require("../../C6859C9085E1369CA0E3F497DAF02695.js")),r=l(require("../../99A1A31685E1369CFFC7CB1166112695.js")),u=require("../../2E0A3A1385E1369C486C521402722695.js");function l(t){return t&&t.__esModule?t:{default:t}}Page({behaviors:[s.default,o.default,r.default],data:{id:"",type:"",detail:null,basic_info:{},album:[],video:null,editing:!1,uploading_progress:{video:!1,image:!1}},onLoad:function(t){var e=this;this.setData({id:t.id,type:t.type}),this.handle((function(){e.init()}))},onUnload:function(){this.clearGeo()},onShow:function(){this.getCurrentCity(),this.getCurrentPosition()},init:function(){var t=this;if(this.setData({basic_info:2==this.data.type?u.SALE_MODEL:u.RENT_MODEL}),this.close(),this.data.id){(2==this.data.type?n.viewSaleInfo:i.viewHouseInfo)({data:this.data.id,success:function(e){t.setData({detail:a(a({},e),{},{house:e.house?e.house:e.sale})}),t.sync(t.data.detail.house)}})}else{var s=t.updateLocalCity();for(var o in this.data.basic_info)this.setData(e({},"basic_info.".concat(o),""));for(var r in this.data.location_info)this.setData(e({},"location_info.".concat(r),""));this.setData({poi_info:null,album:[],video:null}),2!=this.data.type&&this.setData({"basic_info.rent_type":3}),s&&this.setData({"location_info.city":s})}},cancel:function(){wx.navigateBack()},select:function(t){var e=t.detail.type;this.locate(e)},update:function(t){var a=t.detail.name,i=t.detail.value;this.setData(e({},"basic_info.".concat(a),i))},edit:function(){this.setData({editing:!this.data.editing})},manage:function(e){var a=e.detail.files;this.setData({album:[].concat(t(this.data.album),t(a.map((function(t){return t.image}))))})},remove:function(t){var e=t.detail.index;this.data.album.splice(e,1),this.setData({album:this.data.album})},capture:function(t){var e=t.detail.files;this.setData({video:e[0].video})},cutoff:function(){this.setData({video:null})},progress:function(t){var a=t.detail;this.setData(e({},"uploading_progress.".concat(a.type),a.value))},confirm:function(){this.save()},onShareAppMessage:function(){return{title:"发布".concat(2==this.data.type?"买卖":"租赁","房源"),path:"/pages/editor/index?type=".concat(this.data.type)}}});
},{isPage:true,isComponent:true,currentFile:'pages/editor/index.js'});require("pages/editor/index.js");